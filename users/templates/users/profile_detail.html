{% extends "papers/base.html" %}

{% load static %}
{% block javascript %}
  <script type="text/javascript" src="{% static 'users/js/ajax_follow_user.js' %}" ></script>
{% endblock %}


{% load crispy_forms_tags %}
{% block content %}
  <!-- user profile top section -->
  <div class="shadow-sm card container py-3 my-3">
    <div class="row">
      <!-- user avatar -->
      <div class="col col-3 image">
        <img class="img-fluid img-thumbnail rounded-circle" src='{{ profile.image.url }}'>
      </div>
      <!-- User basic info -->
      <div class="col">
        <!-- user name -->
        <div class="row">
          <div class="col h5">
            {{ profile.user.first_name|add:" "|add:profile.user.last_name|title }}
          </div>
        </div>
        <!-- username -->
        <div class="row">
          <p class="col" id="user-username">@{{ profile.user.username }}</p>
        </div>
        <!-- User states -->
        <div class="row">
          <a href="{% url 'user-posts' profile.user.username %}" class="col">
            <div class="row pb-0"><p>{{ post_count }}</p></div>
            <div class="row"><p>Posts</p></div>
          </a>
          <a href="{% url 'followers' profile.user.username %}" class="col">
            <div class="row pb-0"><p>{{ followers_count }}</p></div>
            <div class="row"><p>Followers</p></div>
          </a>
          <a href="{% url 'following' profile.user.username %}" class="col">
            <div class="row pb-0"><p>{{ following_count }}</p></div>
            <div class="row"><p>Following</p></div>
          </a>
        </div>
      </div>
      <div class="col col-2 text-right">
        {% if profile.user.username == user.get_username %}
          <a class="btn btn-outline-info" href="{% url 'profile-update' %}">edit</a>
        {% else %}
          <button class="btn btn-outline-info" id="follow_unfollow">
            <p class="text-muted">loading..</p>
          </button>
        {% endif %}
      </div>
    </div>
  </div>
  <!-- user profile bottom section -->
  <div class="shadow-sm card container py-3 my-3">
    <div class="row">
      <div class="container">
        <div class="nav nav-tabs nav-justified" id="nav-tab" role="tablist">
          <a class="nav-item nav-link active" id="nav-about-tab" data-toggle="tab" href="#user-about" role="tab" aria-controls="nav-home" aria-selected="true">About</a>
          <a class="nav-item nav-link" id="nav-bookmark-tab" data-toggle="tab" href="#user-bookmark" role="tab" aria-controls="nav-profile" aria-selected="false">Bookmarks</a>
          <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#" role="tab" aria-controls="nav-contact" aria-selected="false">Contact</a>
        </div>
        <div class="tab-content" id="nav-tabContent">
          <!-- about -->
          <div class="tab-pane fade show active" id="user-about" role="tabpanel" aria-labelledby="nav-about-tab">
            {% include 'users/user_about.html' %}
          </div>
          <!-- bookmark -->
          <div class="tab-pane fade" id="user-bookmark" role="tabpanel" aria-labelledby="nav-bookmark-tab">
          </div>
          <div class="tab-pane fade" id="#" role="tabpanel" aria-labelledby="nav-contact-tab">

          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
